window.Pager={url:location.pathname,tpl:"",target:"",param:{},_data:null,fun:null,init:function(b){if(typeof b=="string"){this.tpl=b}else{for(var a in b){this[a]=b[a]}}this.tpl=this.tpl==""?$("#item").html():this.tpl;if(this.tpl==""){console.log("init Error");return}if(this.target==""){this.target=$("tbody")}else{this.target=$("#"+this.target)}this.loadPage();$(window).bind("hashchange",function(){Pager.loadPage()})},loadPage:function(){var a=location.hash;if(a.length==0){a=0}else{if(isNaN(a=parseInt(a.substr(1)))){a=0}}this.param.page=a;$.get(this.url,this.param,function(b){Pager.showData(b)},"json")},showData:function(f){var c=/{\w+?}/g,b="",e;if(typeof f.total=="undefined"){e=f;this.total=1}else{this.pager.draw(parseInt(location.hash.length==0?1:location.hash.substr(1)),f.total);this.total=f.total;e=f.data}if(typeof this.fun=="function"){e=this.fun(e)}self._data=e;b="";for(var a in e){b+=this.tpl.replace(c,function(g){var d=g.substr(1,g.length-2);if(d=="_stripe"){return(a%2==0)?"odd":"even"}else{return e[a][d]}})}this.target.html(b)},reload:function(a){if(typeof(a)=="undefined"||location.hash=='#0'){this.loadPage()}else{location.href="#0"}},getRow:function(b,c){for(var a in self._data){if(self._data[a][b]==c){return self._data[a]}}return null},next:function(){var a=parseInt(this.param.page);if(typeof this.total!="undefined"&&this.total<=a+1){return}window.location.href="#"+(a+1)},pre:function(){var a=this.param.page;if(a==0){return}window.location.href="#"+(a-1)},addParam:function(a,b){this.param[a]=b},delParam:function(a){delete this.param[a]},pager:{draw:function(c,e){if(isNaN(c)||e<c){c=1}var d="",f='<li class="paginate_button"><a>……</a></li>',b=1;if(e<=5){for(b=1;b<=e;b++){if(b==c){d+=this.here(c)}else{d+=this.jump(b)}}}else{if(c>=3){d+=this.jump(1)+f;d+=this.jump(c-1);d+=this.here(c);if(c<e){d+=this.jump(c+1);if(e-c>2){d+=f+this.jump(e)}else{if(e-c==2){d+=this.jump(e)}}}}else{for(b=1;b<=3;b++){if(b==c){d+=this.here(c)}else{d+=this.jump(b)}}d+=f+this.jump(e)}}$("#paging").html(d)},jump:function(a){return'<li class="paginate_button"><a href="#'+(a-1)+'">'+a+"</a></li>"},here:function(a){return'<li class="paginate_button active"><a href="javascript:;">'+a+"</a></li>"}}};