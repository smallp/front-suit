$.extend({web:function(a,b,c,d){a=a==''?location.href:a;d=typeof d=='undefined'?'post':d;$.ajax({url:a,method:d,data:b,dataType:'json',success:c})},small:{initSelect:function(a,b,c){var d="";b=(typeof b=='string')?b:'id';c=(typeof c=='string')?c:'name';for(var x of a){d+=`<option b="${x[value]}">${x[c]}</option>`}return d},check2str:function(a){var b=[];$('.'+a+':checked').each(function(){b.push(this.value)});$('#'+a).val(JSON.stringify(b))},arr2check:function(a,b){$('.'+b).prop('checked',false);for(x in a)$('.'+b+'[value='+a[x]+']').prop('checked',true)},fillForm:function(a,b){for(x in b){if(x in a)a[x].value=b[x]}},fillTpl:function(c,d){return c.replace(/{\w+?}/g,function(a){var b=a.substr(1,a.length-2);return d[b]})},time2str:function(a){var b=new Date(a*1000);var c=b.toLocaleDateString();c+=' '+b.getHours()+':'+b.getMinutes()+':'+b.getSeconds();return c}}});$(document).ajaxError(function(a,b){try{b=JSON.parse(b.responseText);alert(b.info)}catch(e){alert('服务器错误！')}});